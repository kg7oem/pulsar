# This works but adjusting it could lead to crashing.

---

templates:
  gain:
    class: pulsar::ladspa::node
    plugin:
      filename: /usr/lib/ladspa/amp.so
      id: 1048
  compressor:
    class: pulsar::ladspa::node
    plugin:
      filename: /usr/local/lib/ladspa/ZamComp-ladspa.so
    config:
      Knee: 0
      Threshold: 0
      Makeup: 0
      Sidechain: 1
  gate:
    class: pulsar::ladspa::node
    plugin:
      filename: /usr/local/lib/ladspa/ZamGate-ladspa.so
  delay:
    class: pulsar::ladspa::node
    plugin:
      filename: /usr/lib/ladspa/delay_1898.so
      id: 1899
  tube:
    class: pulsar::ladspa::node
    plugin:
      filename: /usr/local/lib/ladspa/ZamTube-ladspa.so

chains:
  remove_squelch_tail:
    channels: 1
    state:
      - gate:*
    forward:
      in_1:
        - delay:Input
        - gate:Sidechain Input
    nodes:
      - name: delay
        template: delay
        config:
          Delay Time (s): .1
          Max Delay (s): .2
        link:
          Output: gate:Audio Input 1

      - name: gate
        template: gate
        config:
          Sidechain: 1
          Threshold: -65
          Attack: 25
          Release: 25
          Max gate close: -.inf
        forward:
          Audio Output 1: remove_squelch_tail:out_1

domain:
  config:
    sample_rate: 48000
    buffer_size: 512
  nodes:
    - name: portaudio
      class: pulsar::portaudio::node
      link:
        left_in:
          - tube_left:*
        right_in:
          - tube_right:*

    - name: tube_left
      template: tube
      link:
        Audio Output 1: portaudio:left_out

    - name: tube_right
      template: tube
      link:
        Audio Output 1: portaudio:right_out
